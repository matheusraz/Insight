!function(n){function a(){var a=+n(this).attr("data-length"),t=+n(this).val().length,r=t<=a;n(this).parent().find('span[class="character-counter"]').html(t+"/"+a),e(r,n(this))}function t(a){var t=a.parent().find('span[class="character-counter"]');t.length||(t=n("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),a.parent().append(t))}function r(){n(this).parent().find('span[class="character-counter"]').html("")}function e(n,a){var t=a.hasClass("invalid");n&&t?a.removeClass("invalid"):n||t||(a.removeClass("valid"),a.addClass("invalid"))}n.fn.characterCounter=function(){return this.each(function(){var e=n(this);e.parent().find('span[class="character-counter"]').length||e.attr("data-length")!==undefined&&(e.on("input",a),e.on("focus",a),e.on("blur",r),t(e))})},n(document).on("ready turbolinks:load",function(){n("input, textarea").characterCounter()})}(jQuery);