!function(t){function e(e,r,i,o){var l=t();return t.each(n,function(t,n){if(n.height()>0){var s=n.offset().top,a=n.offset().left,c=a+n.width(),f=s+n.height();!(a>r||c<o||s>i||f<e)&&l.push(n)}}),l}function r(r){++a;var i=o.scrollTop(),n=o.scrollLeft(),s=n+o.width(),f=i+o.height(),u=e(i+c.top+r||200,s+c.right,f+c.bottom,n+c.left);t.each(u,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",a)}),t.each(l,function(t,e){var r=e.data("scrollSpy:ticks");"number"==typeof r&&r!==a&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),l=u}function i(){o.trigger("scrollSpy:winSize")}var o=t(window),n=[],l=[],s=!1,a=0,c={top:0,right:0,bottom:0,left:0};t.scrollSpy=function(e,i){var l={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(t){return'a[href="#'+t+'"]'}};i=t.extend(l,i);var a=[];e=t(e),e.each(function(e,r){n.push(t(r)),t(r).data("scrollSpy:id",e),t('a[href="#'+t(r).attr("id")+'"]').click(function(e){e.preventDefault();var r=t(Materialize.escapeHash(this.hash)).offset().top+1;t("html, body").animate({scrollTop:r-i.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),c.top=i.offsetTop||0,c.right=i.offsetRight||0,c.bottom=i.offsetBottom||0,c.left=i.offsetLeft||0;var f=Materialize.throttle(function(){r(i.scrollOffset)},i.throttle||100),u=function(){t(document).on("ready turbolinks:load",f)};return s||(o.on("scroll",u),o.on("resize",u),s=!0),setTimeout(u,0),e.on("scrollSpy:enter",function(){a=t.grep(a,function(t){return 0!=t.height()});var e=t(this);a[0]?(t(i.getActiveElement(a[0].attr("id"))).removeClass(i.activeClass),e.data("scrollSpy:id")<a[0].data("scrollSpy:id")?a.unshift(t(this)):a.push(t(this))):a.push(t(this)),t(i.getActiveElement(a[0].attr("id"))).addClass(i.activeClass)}),e.on("scrollSpy:exit",function(){if(a=t.grep(a,function(t){return 0!=t.height()}),a[0]){t(i.getActiveElement(a[0].attr("id"))).removeClass(i.activeClass);var e=t(this);a=t.grep(a,function(t){return t.attr("id")!=e.attr("id")}),a[0]&&t(i.getActiveElement(a[0].attr("id"))).addClass(i.activeClass)}}),e},t.winSizeSpy=function(e){return t.winSizeSpy=function(){return o},e=e||{throttle:100},o.on("resize",Materialize.throttle(i,e.throttle||100))},t.fn.scrollSpy=function(e){return t.scrollSpy(t(this),e)}}(jQuery);