!function(e){e.fn.materialbox=function(){return this.each(function(){function t(){n=!1;var t=r.parent(".material-placeholder"),o=(window.innerWidth,window.innerHeight,r.data("width")),l=r.data("height");r.velocity("stop",!0),e("#materialbox-overlay").velocity("stop",!0),e(".materialbox-caption").velocity("stop",!0),e(window).off("scroll.materialbox"),e(document).off("keyup.materialbox"),e(window).off("resize.materialbox"),e("#materialbox-overlay").velocity({opacity:0},{duration:d,queue:!1,easing:"easeOutQuad",complete:function(){a=!1,e(this).remove()}}),r.velocity({width:o,height:l,left:0,top:0},{duration:d,queue:!1,easing:"easeOutQuad",complete:function(){t.css({height:"",width:"",position:"",top:"",left:""}),r.removeAttr("style"),r.attr("style",c),r.removeClass("active"),n=!0,i&&i.css("overflow","")}}),e(".materialbox-caption").velocity({opacity:0},{duration:d,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}if(!e(this).hasClass("initialized")){e(this).addClass("initialized");var i,o,a=!1,n=!0,l=275,d=200,r=e(this),s=e("<div></div>").addClass("material-placeholder"),c=r.attr("style");r.wrap(s),r.on("click",function(){var d=r.parent(".material-placeholder"),s=window.innerWidth,c=window.innerHeight,u=r.width(),p=r.height();if(!1===n)return t(),!1;if(a&&!0===n)return t(),!1;n=!1,r.addClass("active"),a=!0,d.css({width:d[0].getBoundingClientRect().width,height:d[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),i=undefined,o=d[0].parentNode;for(;null!==o&&!e(o).is(document);){var f=e(o);"visible"!==f.css("overflow")&&(f.css("overflow","visible"),i=i===undefined?f:i.add(f)),o=o.parentNode}r.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",u).data("height",p);var h=e('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===n&&t()});r.before(h);var m=h[0].getBoundingClientRect();if(h.css({width:s,height:c,left:-1*m.left,top:-1*m.top}),h.velocity({opacity:1},{duration:l,queue:!1,easing:"easeOutQuad"}),""!==r.data("caption")){var v=e('<div class="materialbox-caption"></div>');v.text(r.data("caption")),e("body").append(v),v.css({display:"inline"}),v.velocity({opacity:1},{duration:l,queue:!1,easing:"easeOutQuad"})}var w=0,y=u/s,g=p/c,b=0,x=0;y>g?(w=p/u,b=.9*s,x=.9*s*w):(w=u/p,b=.9*c*w,x=.9*c),r.hasClass("responsive-img")?r.velocity({"max-width":b,width:u},{duration:0,queue:!1,complete:function(){r.css({left:0,top:0}).velocity({height:x,width:b,left:e(document).scrollLeft()+s/2-r.parent(".material-placeholder").offset().left-b/2,top:e(document).scrollTop()+c/2-r.parent(".material-placeholder").offset().top-x/2},{duration:l,queue:!1,easing:"easeOutQuad",complete:function(){n=!0}})}}):r.css("left",0).css("top",0).velocity({height:x,width:b,left:e(document).scrollLeft()+s/2-r.parent(".material-placeholder").offset().left-b/2,top:e(document).scrollTop()+c/2-r.parent(".material-placeholder").offset().top-x/2},{duration:l,queue:!1,easing:"easeOutQuad",complete:function(){n=!0}}),e(window).on("scroll.materialbox",function(){a&&t()}),e(window).on("resize.materialbox",function(){a&&t()}),e(document).on("keyup.materialbox",function(e){27===e.keyCode&&!0===n&&a&&t()})})}})},e(document).on("ready turbolinks:load",function(){e(".materialboxed").materialbox()})}(jQuery);